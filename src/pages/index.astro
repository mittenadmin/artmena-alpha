---
import "../styles/index.css";

import BaseLayout from "../layouts/BaseLayout.astro";
import PhotoCarousel from "../components/PhotoCarousel.astro";
import CardList from "../components/Cards/CardList.astro";
import HorizontalCardList from "../components/Cards/HorizontalCardList.astro";
import FeatureSection from "../components/FeatureSection.astro";
import { artworks } from "../data/artworks";
import { artists } from "../data/artists";
import { exhibitions } from "../data/exhibitions";
import { galleries } from "../data/galleries";
import { newsArticles } from "../data/news";

// Get featured artworks (first 4)
const featureArtwork = artworks.slice(0, 4).map((artwork) => {
  const artist = artists.find((a) => a.id === artwork.artist_id)!;
  return {
    id: artwork.id,
    imageSrc: artwork.imageUrl,
    imageAlt: artwork.title,
    title: artwork.title,
    text1: artist.name,
    text2: artwork.price,
  };
});

// Get upcoming exhibitions
const upcomingExhibitions = exhibitions
  .filter((ex) => ex.status === "upcoming" || ex.status === "current")
  .slice(0, 2)
  .map((ex) => {
    const gallery = galleries.find((g) => g.id === ex.gallery_id)!;
    return {
      id: ex.id,
      imageSrc: ex.imageUrl,
      imageAlt: ex.title,
      title: ex.title,
      text1: `${ex.startDate} - ${ex.endDate}`,
      text2: `${gallery.location}, ${gallery.country}`,
      description: ex.description,
    };
  });

// Get latest news articles
const newArticles = newsArticles.slice(0, 2).map((article) => ({
  id: article.id,
  imageSrc: article.imageUrl,
  imageAlt: article.title,
  title: article.title,
  description: article.excerpt,
  text1: article.date,
  text2: article.category,
}));
---

<BaseLayout title="artmena" description="artmena">
  <PhotoCarousel />
  {/* Featured Artworks Section */}
  <CardList
    objectType="artwork"
    title="Featured Artwork"
    onViewAll={"artwork"}
    cards={featureArtwork}
    maxRows={1}
  />

  {/* Featured Exhibitions Section */}
  <HorizontalCardList
    objectType="exhibitions"
    title="Upcoming Exhibitions"
    onViewAll={"exhibitions"}
    cards={upcomingExhibitions}
  />

  {/* Feature Section */}
  <FeatureSection
    imageUrl="https://images.unsplash.com/photo-1547891654-e66ed7ebb968?w=1600&h=900&fit=crop"
    title="Follow Latest News on Artmena"
    description="Explore the rich narratives behind contemporary Middle Eastern and North African art. From traditional techniques to modern interpretations, uncover the voices shaping today's art scene."
    learnMoreText="Learn More"
    onclick={"news"}
  />

  {/* news Section */}
  <HorizontalCardList
    objectType="news"
    title="News"
    onViewAll={"news"}
    cards={newArticles}
  />
</BaseLayout>
